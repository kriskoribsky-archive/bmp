#include <stdio.h>
#include <stdlib.h>
#include <getopt.h>

#include "bmp.h"
#include "transformations.h"

void print_usage(FILE *stream);
void print_help(FILE *stream);

int main(int arc, char **argv)
{
    // FILE *input_file = stdin;
    // FILE *output_file = stdout;

    int opt;
    while ((opt = getopt(arc, argv, "rlhvc:s:e:o:i:")) != -1)
    {
        switch (opt)
        {
        case 'o':
            printf("%s\n", optarg[2]);
            break;

        default: // '?'
            print_usage(stderr);
            exit(EXIT_FAILURE);
        }
    }

    return EXIT_SUCCESS;
}

void print_usage(FILE *stream)
{
    fprintf(stream, "Usage: bmp [OPTION]... [FILE]...\n");
}

void print_help(FILE *stream)
{
    fprintf(stream, "Simple BMP transformation tool.\n");
    print_usage(stream);
    fprintf(stream, "\n");
    fprintf(stream, "With no FILE, read from standard input or write to standard output.");
    fprintf(stream, "\n");
    fprintf(stream, "  -r            rotate image right\n");
    fprintf(stream, "  -l            rotate image left\n");
    fprintf(stream, "  -h            flip image horizontally\n");
    fprintf(stream, "  -v            flip image vertically\n");
    fprintf(stream, "  -c y,x,h,w    crop image from position [y,x] of giwen height and widht\n");
    fprintf(stream, "  -s factor     scale image by factor\n");
    fprintf(stream, "  -e string     extract colors\n");
    fprintf(stream, "  -o file       write output to file\n");
    fprintf(stream, "  -i file       read input from the file\n");
}